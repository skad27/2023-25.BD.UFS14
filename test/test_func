import azure.functions as func
import logging
import requests
from bs4 import BeautifulSoup
from PyPDF2 import PdfReader
import io
import re
import json

app = func.FunctionApp()

def extract_text_from_pdf(url):
    try:
        response = requests.get(url)
        if response.status_code == 200 and 'application/pdf' in response.headers.get('Content-Type', ''):
            pdf_data = io.BytesIO(response.content)
            reader = PdfReader(pdf_data)
            text = ''
            for page in reader.pages:
                text += page.extract_text()
            return text
        else:
            logging.info("PDF not accessible, error")
            return None
    except Exception as e:
        logging.error(f"Error extracting text from PDF: {e}")
        return None